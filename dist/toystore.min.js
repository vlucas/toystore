(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _get=require("just-safe-get");var _set=require("just-safe-set");var difference=require("difference");var intersect=require("just-intersect");function zipObject(keys,values){return keys.reduce(function(object,currentValue,currentIndex){object[currentValue]=values[currentIndex];return object},{})}function create(){var defaultState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var state=clone(defaultState);var watchers=[];function get(path){var value=_get(state,path);if(value===undefined){throw new Error('[toystore] Requested store key "'+path+'" was not found in store.')}if((typeof value==="undefined"?"undefined":_typeof(value))==="object"&&value!==null){value=clone(value)}return clone(value)}function getAll(paths){if(paths===undefined){return clone(state)}if(!paths instanceof Array){throw new Error('[toystore] getAll() argument "paths" must be an array.')}var values=paths.map(get);return zipObject(paths,values)}function getSilent(path){return _get(state,path)}function notifyAllWatchers(){watchers.map(function _notifyWatcher(watcher){var watchedKeyValues={};try{watchedKeyValues=getAll(watcher.paths)}catch(e){}watcher.callback(watchedKeyValues)})}function notifyWatchersOnPaths(paths){var expandedPaths=_expandNestedPaths(paths);watchers.map(function _notifyWatcher(watcher){var hasPath=intersect(expandedPaths,watcher.paths).length>0;if(hasPath){var watchedKeyValues={};try{watchedKeyValues=getAll(paths)}catch(e){}watcher.callback(watchedKeyValues)}});if(paths!=="*"){notifyGlobalWatchers()}}function notifyGlobalWatchers(){notifyWatchersOnPaths("*")}function set(path,value){var paths=_pathsArray(path);if(_isObject(value)===true){var existingValue=getSilent(path);if(_isObject(existingValue)){var oldKeys=_deepKeys(existingValue,path);var removedKeys=void 0;paths=_deepKeys(value,path);removedKeys=difference(oldKeys,paths);if(removedKeys.length>0){paths=paths.concat(removedKeys)}}}var valueType=typeof value==="undefined"?"undefined":_typeof(value);if(valueType==="function"){throw new Error('[toystore] Cannot set "'+path+'" with value type "'+valueType+'". All store values must be serializable.')}if(value===undefined){value=null}setSilent(path,value);notifyWatchersOnPaths(paths)}function setSilent(path,value){_set(state,path,value)}function setAll(obj){var paths=Object.keys(obj);paths.map(function(path){return setSilent(path,obj[path])});notifyWatchersOnPaths(paths)}function reset(newState){state=clone(newState||defaultState);notifyAllWatchers()}function watch(paths,callback){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{priority:0};paths=_pathsArray(paths);watchers.push({callback:callback,paths:paths,options:options});watchers=watchers.sort(_sortByPriority)}function watchAll(callback){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{priority:0};watchers.push({callback:callback,paths:"*",options:options});watchers=watchers.sort(_sortByPriority)}function unset(path){_set(state,path,undefined)}function unwatch(callback){var index=watchers.findIndex(function _matchWatcher(watcher){return watcher&&watcher.callback===callback});if(index){if(watchers.length===1){unwatchAll()}else{delete watchers[index]}}}function unwatchAll(){watchers=[]}return{get:get,getAll:getAll,reset:reset,set:set,setAll:setAll,setSilent:setSilent,watch:watch,watchAll:watchAll,unset:unset,unwatch:unwatch,unwatchAll:unwatchAll}}function _sortByPriority(a,b){return b.options.priority-a.options.priority}function _pathsArray(paths){return paths instanceof Array?paths:[paths]}function _expandNestedPaths(paths){var expandedPaths=[];_pathsArray(paths).forEach(function(p){if(p.indexOf(".")!==-1){var pathsWithRoots=p.split(".").map(function(value,index,array){return array.slice(0,index+1).join(".")});expandedPaths=expandedPaths.concat(pathsWithRoots)}else{expandedPaths.push(p)}});return expandedPaths}function _deepKeys(obj){var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return Object.keys(obj).reduce(function(acc,key){var value=obj[key];if(_isObject(value)){acc.push.apply(acc,_deepKeys(value,prefix?prefix+"."+key:key))}else{acc.push(prefix?prefix+"."+key:key)}return acc},[])}function _isObject(testVar){return testVar instanceof Object&&!Array.isArray(testVar)&&testVar!==null}function clone(obj){return JSON.parse(JSON.stringify(obj))}module.exports={create:create}},{difference:2,"just-intersect":3,"just-safe-get":4,"just-safe-set":5}],2:[function(require,module,exports){var Difference=module.exports=function difference(a,b){if(b.length>a.length){var tmp=a;a=b;b=tmp}var o_a={};var o_b={};for(var i=0;i<a.length;i+=1){o_a[a[i]]=a[i]}for(var i=0;i<b.length;i+=1){o_b[b[i]]=b[i]}var result=[];for(var key in o_b){if(o_a[key]===undefined)result.push(o_b[key])}for(var key in o_a){if(o_b[key]===undefined)result.push(o_a[key])}return result}},{}],3:[function(require,module,exports){module.exports=intersect;function intersect(arr1,arr2){var result=[];var len=arr1.length;for(var i=0;i<len;i++){var elem=arr1[i];if(arr2.indexOf(elem)>-1){result.push(elem)}}return result}},{}],4:[function(require,module,exports){module.exports=get;function get(obj,props){if(typeof props=="string"){props=props.split(".")}if(typeof props=="symbol"){props=[props]}var prop;while(prop=props.shift()){obj=obj[prop];if(!obj){return obj}}return obj}},{}],5:[function(require,module,exports){module.exports=set;function set(obj,props,value){if(typeof props=="string"){props=props.split(".")}if(typeof props=="symbol"){props=[props]}var lastProp=props.pop();if(!lastProp){return false}var thisProp;while(thisProp=props.shift()){if(!obj[thisProp]){obj[thisProp]={}}obj=obj[thisProp]}obj[lastProp]=value;return true}},{}]},{},[1]);